<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Marketing Demo</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <div class="page">
    <header class="hero">
      <div>
        <h1>AI Marketing Workflow Automation</h1>
        <p class="muted">
          Paste marketing notes → get a structured summary, action items, a draft reply, and CRM fields.
        </p>
      </div>
      <div class="hero-meta">
        <div class="hero-pill">Intelligence Dashboard</div>
        <div class="hero-pill">Explainability Layer</div>
      </div>
    </header>

    <main class="layout">
      <section class="panel input-panel" aria-label="Input panel">
        <div class="panel-header">
          <div>
            <h2 class="panel-title">Input</h2>
            <p class="panel-sub">Give it notes, emails, or campaign briefs.</p>
          </div>
          <div id="modelRow" class="hidden">
            <label for="modelSelect" class="inline-label">Model</label>
            <select id="modelSelect" aria-label="Select AI Model"></select>
          </div>
        </div>

        <label for="inputText" class="field-label">Marketing Content</label>
        <textarea 
          id="inputText" 
          placeholder="Paste meeting notes, campaign briefs, or client emails...

Example:
Client meeting with Acme Corp - Jan 8, 2026. Q1 campaign for new product launch. Target millennials on social media. Budget $50k. Need concepts by Jan 20. Contact: Sarah Chen (sarah@acme.com). Focus on Instagram and TikTok. Emphasize sustainability. Need competitor analysis."
          aria-label="Enter marketing content to analyze"
          required
        ></textarea>
        <div class="panel-actions">
          <button
            id="runBtn" 
            onclick="processContent()" 
            aria-label="Process content with AI"
          >
            Process with AI
          </button>
        </div>
        <div class="panel-actions panel-actions-stack">
          <label for="sampleSelect" class="field-label">Load a sample prompt</label>
          <select id="sampleSelect" aria-label="Select a sample input">
            <option value="">Choose a scenario...</option>
          </select>
          <button
            type="button"
            onclick="insertSampleInput()"
            aria-label="Insert selected sample"
          >
            Insert sample prompt
          </button>
        </div>

        <div id="loading" class="hidden" role="alert" aria-live="polite">
          <div class="loading-title">Processing...</div>
          <div class="progress-wrap" aria-hidden="true">
            <div class="progress-bar" id="progressBar"></div>
          </div>
          <div class="loading-sub" id="loadingSub">Calibrating insight engine</div>
        </div>
        
        <div id="debugSection" class="hidden">
          <details>
            <summary aria-label="Toggle debug view">Debug: View Raw JSON Response</summary>
            <pre id="debugJson" class="debug-panel"></pre>
          </details>
        </div>
      </section>

      <section id="results" class="panel results-panel hidden" aria-label="Results panel">
        <div class="panel-header">
          <div>
            <h2 class="panel-title">Intelligence Dashboard</h2>
            <p class="panel-sub">Priority signals, urgency, and why each action matters.</p>
          </div>
        </div>

        <div class="metrics" id="metrics">
          <div class="metric-card priority-low" id="priorityCard" role="region" aria-label="Priority metric">
            <div class="metric-label">Priority</div>
            <div class="metric-value" id="priorityValue">—</div>
            <div class="metric-sub" id="prioritySub">Waiting for input</div>
          </div>
          <div class="metric-card deadline-card" id="deadlineCard" role="region" aria-label="Deadline metric">
            <div class="metric-label">Deadline</div>
            <div class="metric-value" id="deadlineValue">—</div>
            <div class="metric-sub" id="deadlineSub">No deadline found</div>
          </div>
          <div class="metric-card budget-card" id="budgetCard" role="region" aria-label="Budget metric">
            <div class="metric-label">Budget</div>
            <div class="metric-value" id="budgetValue">—</div>
            <div class="metric-sub" id="budgetSub">Not specified</div>
          </div>
          <div class="metric-card sentiment-card" id="sentimentCard" role="region" aria-label="Sentiment metric">
            <div class="metric-label">Sentiment</div>
            <div class="metric-value" id="sentimentValue">—</div>
            <div class="metric-sub" id="sentimentSub">Client tone</div>
          </div>
        </div>

        <div class="section-block">
          <div class="section-title">Action/Impact Matrix</div>
          <div class="matrix" id="actionMatrix" role="grid">
            <div class="matrix-cell" id="matrixCritical" role="gridcell" aria-label="High Impact High Urgency items">
              <div class="matrix-title">High Impact / High Urgency</div>
            </div>
            <div class="matrix-cell" id="matrixStrategic" role="gridcell" aria-label="High Impact Low Urgency items">
              <div class="matrix-title">High Impact / Low Urgency</div>
            </div>
            <div class="matrix-cell" id="matrixQuick" role="gridcell" aria-label="Low Impact High Urgency items">
              <div class="matrix-title">Low Impact / High Urgency</div>
            </div>
            <div class="matrix-cell" id="matrixMonitor" role="gridcell" aria-label="Low Impact Low Urgency items">
              <div class="matrix-title">Low Impact / Low Urgency</div>
            </div>
          </div>
        </div>

        <div id="confidenceBanner" class="confidence-banner hidden" role="alert" aria-live="polite"></div>

        <section id="insights" class="insights hidden" aria-label="Insight Lab">
          <div class="section-title">Insight Lab</div>
          <div class="insight-grid">
            <div class="insight-card" role="region" aria-label="Text stats">
              <h3>Text Stats</h3>
              <div id="textStats"></div>
            </div>
            <div class="insight-card" role="region" aria-label="Tone and urgency">
              <h3>Tone & Urgency</h3>
              <div id="toneStats"></div>
            </div>
            <div class="insight-card" role="region" aria-label="Keyword mix">
              <h3>Keyword Mix</h3>
              <div id="keywordStats"></div>
            </div>
            <div class="insight-card" role="region" aria-label="Markov transitions">
              <h3>Markov Transitions</h3>
              <div id="markovStats"></div>
            </div>
            <div class="insight-card insight-wide" role="region" aria-label="Evidence map">
              <h3>Evidence Map</h3>
              <div id="evidenceStats"></div>
            </div>
          </div>
        </section>

        <div class="section-block">
          <div class="section-title">Results</div>

          <div class="result" role="region" aria-label="Summary">
            <h3>Summary</h3>
            <p id="summary"></p>
          </div>

          <div class="result" role="region" aria-label="Action Items">
            <h3>Action Items</h3>
            <div id="actions"></div>
          </div>

          <div class="result" role="region" aria-label="Draft Content">
            <h3>Draft Content</h3>
            <pre id="draft"></pre>
          </div>

          <div class="result" role="region" aria-label="CRM Data">
            <h3>CRM Data</h3>
            <div id="crm"></div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite">Task created.</div>

  <script src="js/app.js"></script>
</body>
</html>
